<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<!-- Bootstrap CSS -->
		<link href="../bootstrap/bootstrap.min.css" rel="stylesheet">
		<!-- Tamarack CSS -->
		<link href="../tamarack/tamarack.css" rel="stylesheet">		
		<!-- jQuery -->
		<script src="../jquery/jquery.min.js"></script>
		<!-- Popper JS -->
		<script src="../popper/popper.min.js"></script>
		<!-- Bootstrap JS -->
		<script src="../bootstrap/bootstrap.min.js"></script>
		<!-- Tamarack JS -->
		<script src="../tamarack/tamarack.js"></script>
	</head>
	<body>	
		<script>
			var textEditor = new tkTextEdit();
			var doc = new tkDocument();
			doc.title = "Notepad";

			var clientArea = new tkDiv();
			clientArea.element.style.backgroundColor = "rgb(240,240,240)";
			clientArea.addClass("fill", "flexColumns");
			doc.add(clientArea);

			buildRibbon();

			textEditor.autofocus = true;
			textEditor.placeholder = "Type here..."
			textEditor.addTo(clientArea);
			textEditor.addClass("fill","borderless");
			setColor(new tkColor("hsla(199, 33%, 20%, 1.00)"));

			function buildRibbon()
			{
				var ribbon = new tkRibbon();
				
				// Home Page
				var homePage = new tkRibbonPage("Home", "homePage");
				ribbon.addPage(homePage);

				// Window Group
				var windowGroup = new tkRibbonGroup();
				windowGroup.title = "Window";
				homePage.addContent(windowGroup.element);

				var toggleFullscreenButton = new tkButton();
				toggleFullscreenButton.tooltip = say("Toggle Fullscreen");
				toggleFullscreenButton.image = "../icons/actions/22/zoom-fullscreen.svg";
				windowGroup.addButton(toggleFullscreenButton.element);
				toggleFullscreenButton.e.onclick = function() {
					var bodyElement = makeElement(document.body);
					bodyElement.toggleFullscreen();
				};

				// Help Group
				var helpGroup = new tkRibbonGroup();
				helpGroup.title = "Help";
				homePage.addContent(helpGroup.element);

				var aboutButton = new tkButton();
				aboutButton.tooltip = say("About App");
				aboutButton.image = "../icons/actions/22/project-development.svg";
				helpGroup.addButton(aboutButton.element);
				aboutButton.e.onclick = function() {
					tkDialog.show("Notepad App 1.0 - A Tamarack Demo");
				};
				
				
				var aboutTkButton = new tkButton();
				aboutTkButton.tooltip = say("About Tamarack");
				aboutTkButton.image = "../icons/actions/22/help-about.svg";
				helpGroup.addButton(aboutTkButton.element);
				aboutTkButton.e.onclick = function() {					
					aboutTamarack.show();
				};

				// Format Page
				var formatPage = new tkRibbonPage("Format", "formatPage");
				ribbon.addPage(formatPage);
				
				// Style Group
				var styleGroup = new tkRibbonGroup();
				styleGroup.title = "Style";
				formatPage.addContent(styleGroup.element);

				var colorButton = new tkButton();
				colorButton.tooltip = say("Background Color");
				colorButton.image = "../icons/actions/22/adjustlevels.svg";
				styleGroup.addButton(colorButton.element);
				colorButton.e.onclick = () => {
					var oldColor = new tkColor();
					oldColor.parse(textEditor.style.backgroundColor);

					tkColorDialog.show(oldColor.clone(), (dialogResult, color) => {
						if(dialogResult == tkDialogResult.OK) 
							setColor(color);
					});
				};

				var fontButton = new tkButton();
				fontButton.tooltip = say("Font");
				fontButton.image = "../icons/actions/22/gtk-select-font.svg";
				styleGroup.addButton(fontButton.element);
				fontButton.e.onclick = () => {
					tkFontDialog.show(tkFont.fromElement(textEditor.e), (dialogResult, font) => {
						if (dialogResult == tkDialogResult.OK)
							textEditor.e.style.font = font.getCss();
					});
				};

				// Select Home Page
				ribbon.activeIndex = 0;	
				ribbon.addTo(clientArea);
			}

			function setColor(_color) {
				textEditor.style.backgroundColor = _color.getHslaCss();
				textEditor.style.color = (_color.isDark()) ? "rgb(255,255,255)" : "rgb(0,0,0)"; 
			}
		</script>
	</body>
</html>