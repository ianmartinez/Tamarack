<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Bootstrap CSS -->
		<link href="../bootstrap/css/bootstrap.css" rel="stylesheet">
		<!-- Tamarack CSS -->
		<link href="../tamarack/tamarack.css" rel="stylesheet">
	</head>
	<body>
		<!-- jQuery -->
		<script src="../jquery/jquery.min.js"></script>
		<!-- Tamarack JS -->
		<script src="../tamarack/tamarack.js"></script>
		<!-- Bootstrap JS -->
		<script src="../bootstrap/js/bootstrap.min.js"></script>
		
		<script>
			var textEditor = new tkTextEdit();
			var doc = new tkDocument();
			doc.title = "Notepad";

			var clientArea = new tkDiv();
			clientArea.element.style.backgroundColor = "rgb(240,240,240)";
			clientArea.addClass("fill", "flexColumns");
			doc.add(clientArea);

			buildRibbon();

			textEditor.addClass("fill");
			textEditor.autofocus = true;
			textEditor.placeholder = "Type here..."
			textEditor.addTo(clientArea);
			setColor(new tkColor("hsla(183, 72%, 44%, 1.00)"));

			function buildRibbon()
			{
				var ribbon = new tkRibbon();
				
				// Home Page
				var homePage = new tkRibbonPage("Home", "homePage");
				ribbon.addPage(homePage);

				// Window Group
				var windowGroup = new tkRibbonGroup();
				windowGroup.title = "Window";
				homePage.addContent(windowGroup.element);

				var toggleFullscreenButton = new tkButton();
				toggleFullscreenButton.text = "Toggle Fullscreen";
				toggleFullscreenButton.image = "../icons/actions/22/zoom-fullscreen.svg";
				windowGroup.addButton(toggleFullscreenButton.element);
				toggleFullscreenButton.e.onclick = function() {
					var bodyElement = makeElement(document.body);
					bodyElement.toggleFullscreen();
				};

				// Help Group
				var helpGroup = new tkRibbonGroup();
				helpGroup.title = "Help";
				homePage.addContent(helpGroup.element);

				var aboutButton = new tkButton();
				aboutButton.text = "About";
				aboutButton.image = "../icons/actions/22/help-about.svg";
				helpGroup.addButton(aboutButton.element);
				aboutButton.e.onclick = function() {
					var aboutDialog = new tkDialog();
					aboutDialog.addContent(sayP("Notepad App 1.0 - A Tamarack Demo"));
					aboutDialog.show();
				};

				// Format Page
				var formatPage = new tkRibbonPage("Format", "formatPage");
				ribbon.addPage(formatPage);
				
				// Style Group
				var styleGroup = new tkRibbonGroup();
				styleGroup.title = "Text Style";
				formatPage.addContent(styleGroup.element);

				var colorButton = new tkButton();
				colorButton.text = "Color";
				colorButton.image = "../icons/actions/22/adjustlevels.svg";
				styleGroup.addButton(colorButton.element);
				colorButton.e.onclick = () => 
				{
					var colorDialog = new tkColorDialog();
					var oldColor = new tkColor();
					oldColor.parse(textEditor.style.backgroundColor);

					colorDialog.color = oldColor.clone();
					colorDialog.show((dialogResult) => {
						if(dialogResult == tkDialogResult.OK) 
							setColor(colorDialog.color);
					});
				};

				var fontButton = new tkButton();
				fontButton.text = "Font";
				fontButton.image = "../icons/actions/22/gtk-select-font.svg";
				styleGroup.addButton(fontButton.element);

				// Select Home Page
				ribbon.goToIndex(0);	
				ribbon.addTo(clientArea);
			}

			function setColor(_color)
			{
				textEditor.style.backgroundColor = _color.getHslaCss();
				textEditor.style.color = (_color.isDark()) ? "rgb(255,255,255)" : "rgb(0,0,0)"; 
			}
		</script>
	</body>
</html>